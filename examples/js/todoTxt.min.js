/*! todoTxtWebUi v1.0.0, created by: Jason Holt Smith <bicarbon8@gmail.com> 2015-01-04 20:08:26 */

[].includes||(Array.prototype.includes=function(a){"use strict";if(void 0===this||null===this)throw new TypeError("Cannot convert this value to object");var b=Object(this),c=parseInt(b.length)||0;if(0===c)return!1;var d,e=parseInt(arguments[1])||0;e>=0?d=e:(d=c+e,0>d&&(d=0));for(var f;c>d;){if(f=b[d],a===f||a!==a&&f!==f)return!0;d++}return!1});var TodoTxt=TodoTxt||{};TodoTxt.Attributes={priorities:{},projects:{},contexts:{}},TodoTxt.getSortedTaskArray=function(){var a=[];for(var b in localStorage){var c=new RegExp("^("+TodoTxt.Resources.get("NAMESPACE")+")");if(b.match(c)){var d=TodoTxt.getTask(b);d.id=b,a.push(d),TodoTxt.updateFilters(d)}}return a.sort(TodoTxt.compareTasks),a},TodoTxt.getFilteredTaskArray=function(a){var b=TodoTxt.getSortedTaskArray();if(a&&""!==a){for(var c=a.split(" "),d="[.]*",e=0;e<c.length;e++){var f=c[e].replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08");d+="("+f+")[.]*"}var g=new RegExp(d,"i"),h=b.filter(function(a){return a.toString().match(g)});b=h}return b},TodoTxt.getTask=function(a){var b,c=localStorage.getItem(a);return c&&(b=(new TodoTxt.Task).parseFromString(c),b.id=a),b},TodoTxt.addTask=function(a){localStorage.setItem(a.id,a.toString())},TodoTxt.parseTodoTxtFile=function(a,b){b||confirm(TodoTxt.Resources.get("OVERWRITE_CONFIRM"))&&localStorage.clear();var c=a.split("\n");for(var d in c)if("string"==typeof c[d]){var e=c[d];if(e&&""!==e){var f=(new TodoTxt.Task).parseFromString(e);TodoTxt.addTask(f)}}},TodoTxt.createTask=function(a){var b=a||"";TodoTxt.updateTask(TodoTxt.Utils.createId(),b)},TodoTxt.updateTask=function(a,b){var c=(new TodoTxt.Task).parseFromString(b);return c.id=a,TodoTxt.addTask(c),!0},TodoTxt.updateFilters=function(a){a.priority&&(TodoTxt.Attributes.priorities[a.priority]=!0);for(var b in a.projects)"string"==typeof a.projects[b]&&(TodoTxt.Attributes.projects[a.projects[b]]=!0);for(var b in a.contexts)"string"==typeof a.contexts[b]&&(TodoTxt.Attributes.contexts[a.contexts[b]]=!0)},TodoTxt.deleteTask=function(a){return confirm(TodoTxt.Resources.get("DELETE_CONFIRM")+'\n	"'+TodoTxt.getTask(a).toString()+'"')?(localStorage.removeItem(a),!0):void 0},TodoTxt.exportTodoTxtFile=function(){var a=TodoTxt.getSortedTaskArray(),b="";for(var c in a)if(a[c]instanceof TodoTxt.Task){var d=a[c];b+=d.toString()+"\n"}var e=encodeURI("data:text/csv;charset=utf-8,"+b);window.open(e)},TodoTxt.compareTasks=function(a,b){var c=a.isActive,d=b.isActive,e=a.priority,f=b.priority,g=a.createdDate,h=b.createdDate,i=a.completedDate,j=b.completedDate;if(c!=d)return c?-1:1;if(e!=f){if(null==f||f>e)return-1;if(null==e||e>f)return 1}else{if(g!=h)return h>g?-1:1;if(i!=j)return i>j?-1:1}return 0};var TodoTxt=TodoTxt||{};TodoTxt.Utils={COUNTER:0,createId:function(){return TodoTxt.Resources.get("NAMESPACE")+TodoTxt.Utils.COUNTER++},formatDate:function(a){var b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return String(1e4*b+100*c+d)},getLanguage:function(){var a=window.navigator.userLanguage||window.navigator.language;return a.toLowerCase()}};var TodoTxt=TodoTxt||{};TodoTxt.Task=function(a){this.id=TodoTxt.Utils.createId(),this.priority=null,this.createdDate=null,this.completedDate=null,this.projects=[],this.contexts=[],this.isActive=!0,this.text="",a&&this.parseFromString(a)},TodoTxt.Task.prototype.parseFromString=function(a){return this.text=a,"string"==typeof a&&(this.parseStatusFromString(a),this.parsePriorityFromString(a),this.parseCompletedDateFromString(a),this.parseCreatedDateFromString(a),this.parseProjectsFromString(a),this.parseContextsFromString(a)),this},TodoTxt.Task.prototype.parseStatusFromString=function(a){this.isActive=a&&a.match(/^(x )/)?!1:!0},TodoTxt.Task.prototype.parsePriorityFromString=function(a){var b=null;if(a){var c=/^(\([A-Z]\) )/,d=a.match(c);d&&(b=d[0].replace(/[\s]*/g,""))}this.priority=b},TodoTxt.Task.prototype.parseCompletedDateFromString=function(a){var b=null;if(a&&!this.isActive){var c=this.parseDatesFromString(a);c&&(b=c[0].replace(/[\s]*/g,""))}this.completedDate=b},TodoTxt.Task.prototype.parseCreatedDateFromString=function(a){var b=null;if(a){var c=this.parseDatesFromString(a);c&&(this.isActive?b=c[0].replace(/[\s]*/g,""):c.length>1&&(b=c[1].replace(/[\s]*/g,"")))}this.createdDate=b},TodoTxt.Task.prototype.parseDatesFromString=function(a){var b=null;if(a){var c=/(\d{4}-\d{2}-\d{2}\s)/g;match=a.match(c),match&&(b=match)}return b},TodoTxt.Task.prototype.parseProjectsFromString=function(a){var b=[];if(a){var c=/\+[0-9A-Za-z]+/g,d=a.match(c);d&&(b=d)}this.projects=b},TodoTxt.Task.prototype.parseContextsFromString=function(a){var b=[];if(a){var c=/\@[0-9A-Za-z]+/g,d=a.match(c);d&&(b=d)}this.contexts=b},TodoTxt.Task.prototype.toString=function(){return this.text};var TodoTxt=TodoTxt||{};TodoTxt.Resources={recs:{},register:function(a,b){TodoTxt.Resources.recs[a]=b},get:function(a){var b=TodoTxt.Resources.recs[TodoTxt.Utils.getLanguage()];b||(b=TodoTxt.Resources.recs["en-us"]);var c=b[a];if(!c)throw"requested resource not found: "+a;return c}},TodoTxt.Resources.register("en-us",{NAMESPACE:"TodoTxt-",OVERWRITE_CONFIRM:"This will overwrite any existing list.  Are you sure you wish to proceed?",DELETE_CONFIRM:"Are you sure you want to delete task?"});
//# sourceMappingURL=todoTxt.min.js.map